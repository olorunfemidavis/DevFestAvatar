<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>#DevFest Avatar Creator</title>
    <link rel="shortcut icon" href="images/gdg_nmwyzu.png" />
    <meta name="theme-color" content="#23457C" />

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no" />

    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="DevFest Avatar" />
    <link rel="icon" sizes="192x192" href="images/dva192.png" />

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="DevFest Avatar" />
    <link rel="apple-touch-icon" href="images/dva152.png" />

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/dva144.png" />
    <meta name="msapplication-TileColor" content="#23457C" />

    <meta name="description" content="Create your #DevFest Avatar" />
    <link rel="canonical" href="https://devfestavatar.web.app" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="#DevFest Avatar Creator" />
    <meta property="og:description" content="Create your #DevFest Avatar" />
    <meta property="og:url" content="https://devfestavatar.web.app" />
    <meta property="og:site_name" content="#DevFest Avatar Creator" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:description" content="Create your #DevFest Avatar" />
    <meta name="twitter:title" content="Create your #DevFest Avatar" />

    <link rel="stylesheet" href="css/site.css" />
    <link
      href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.10.2/css/solid.css"
      integrity="sha384-qPldrzmea0i8jhonuql0da/kQWeaXdQl+krGXcTQUdRUGHcXBfSrBbZLbyMcCWcF"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.10.2/css/brands.css"
      integrity="sha384-qVnmyLTtnGPGEN3HDG2MCEOXWH1Yk/i70lKRuV+gMCDQg+jblQlFGPf1mejWUyYG"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.10.2/css/fontawesome.css"
      integrity="sha384-hM7EQerc09E4O3zhtvF2iqcB4ZkEu9xkLQndhXdGGCEJ/sB4JK54SuKGmIC35UTf"
      crossorigin="anonymous"
    />
    <link href="css/loading.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/cropme@latest/dist/cropme.min.css"
    />

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
          'gtm.start': new Date().getTime(),
          event: 'gtm.js',
        });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-WRNMXXW');
    </script>
    <!-- End Google Tag Manager -->
  </head>

  <body class="mother">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-WRNMXXW"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#reserved-urls -->

    <div class="dialog-mask collapse">
      <div class="dialog-status">
        <div class="dialog-status-container">
          <div class="progress-ring progress-large">
            <div class="progress-circle"></div>
            <div class="progress-circle"></div>
            <div class="progress-circle"></div>
            <div class="progress-circle"></div>
            <div class="progress-circle"></div>
          </div>
          <span class="dialog-status-message"></span>
        </div>
      </div>
    </div>

    <div class="container">
      <main role="main" class="aarin">
        <div style="background: transparent" class="aarin">
          <div class="slat">
            <div id="tocrop" class="crop_element"></div>

            <div class="uploader row">
              <input type="file" style="display: none" accept="image/*" />
              <p class="fileInput upload">Upload Image</p>
            </div>

            <p class="mdc-typography--headline6 dudu center_text">
              Choose color to download.
            </p>
          </div>

          <div class="grid-horizontal-container square-thumbnails">
            <input
              type="image"
              src="./images/goto_Circle.png"
              class="thumbnail-cc img-circle"
              alt="circle"
            />
            <input
              type="image"
              src="./images/thumbnail-green.png"
              class="thumbnail-cc"
              alt="green"
            />
            <input
              type="image"
              src="./images/thumbnail-yellow.png"
              class="thumbnail-cc"
              alt="yellow"
            />
            <input
              type="image"
              src="./images/thumbnail-blue.png"
              class="thumbnail-cc"
              alt="blue"
            />
            <input
              type="image"
              src="./images/thumbnail-red.png"
              class="thumbnail-cc"
              alt="red"
            />
          </div>

          <div class="grid-horizontal-container circle-thumbnails">
            <input
              type="image"
              src="./images/goto_Square.png"
              class="thumbnail-cc"
              alt="square"
            />
            <input
              type="image"
              src="./images/thumbnail-green-circle.png"
              class="thumbnail-cc img-circle"
              alt="green"
            />
            <input
              type="image"
              src="./images/thumbnail-yellow-circle.png"
              class="thumbnail-cc img-circle"
              alt="yellow"
            />
            <input
              type="image"
              src="./images/thumbnail-blue-circle.png"
              class="thumbnail-cc img-circle"
              alt="blue"
            />
            <input
              type="image"
              src="./images/thumbnail-red-circle.png"
              class="thumbnail-cc img-circle"
              alt="red"
            />
          </div>

          <a
            style="display: none"
            href="#"
            asp-action="Download"
            download
            id="downloadimg"
            download
            title="Download"
          ></a>
        </div>
        <footer class="footer">
          <div class="grid-vertical-container">
            <div class="dudu center_text">
              With <span style="color: red">‚ù§</span> by
              <a
                style="color: #2b83fc"
                href="https://gdg.community.dev/gdg-ado-ekiti"
                >GDG Ado-Ekiti</a
              >
              üá≥üá¨ |
              <a
                target="_blank"
                style="color: #2b83fc"
                href="https://sites.google.com/view/devfestavatarcreatorprivacy/home"
                >Privacy</a
              >
            </div>

            <p class="center_text dudu" style="line-height: 0px; margin: 5px">
              <span id="year"></span> Stat:
              <b><span id="countSpan"></span></b> imgs.
              <a
                target="_blank"
                class="uploader dudu"
                href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fdevfestavatar.web.app&via=fzanyA&text=I%20just%20made%20my%20Avatar%21%20Join%20me%20in%20Celebrating%20the%20season%20with%20@gdgadoekiti.%20Create%20yours%20&hashtags=DevFest"
                >Tweet #DevFest</a
              >
            </p>

            <a
              href="https://github.com/fzany/DevFestAvatar"
              target="_blank"
              class="aarin"
            >
              <img
                src="./images/open_source.png"
                alt="Open source"
                class="aarin"
              />
            </a>
          </div>
        </footer>
      </main>
    </div>

    <script>
      document.getElementById('year').innerText = new Date().getFullYear();
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"
      crossorigin="anonymous"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="js/cropme.js"></script>
    <script src="js/merge.js"></script>
    <script src="js/site.js" asp-append-version="true"></script>
  </body>

  <!-- Import firebase configuration for image generate counter using Realtime database -->

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';
    import { getAnalytics } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js';
    // TODO: Add SDKs for Firebase products that you want to use
    const firebaseConfig = {
      apiKey: 'AIzaSyC0Q8Gzq2rwqDJTO66-1Ve3nnjJb61f2xI',
      authDomain: 'fyi-app-a9a7e.firebaseapp.com',
      databaseURL: 'https://fyi-app-a9a7e-default-rtdb.firebaseio.com',
      projectId: 'fyi-app-a9a7e',
      storageBucket: 'fyi-app-a9a7e.appspot.com',
      messagingSenderId: '866475993075',
      appId: '1:866475993075:web:c390ac8d20c4d1701bd486',
      measurementId: 'G-YR8GM7E8YF',
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    import {
      getDatabase,
      ref,
      child,
      get,
      update,
    } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';

    const db = getDatabase();
    let span = document.getElementById('countSpan');
    let btn = document.getElementById('downloadimg');
    let countVariable;
    // Idan gangan (the magician)
    btn.onclick = function () {
      const dbref = ref(db);
      get(child(dbref, 'counter')).then((snapshot) => {
        countVariable = Number(snapshot.val());
        // Abeg count if you see "Downloading"
        if (toastr.success) countVariable++;
        else null;
        update(ref(db, '/'), { counter: countVariable });
        // Display the total here
        span.innerHTML = countVariable;
      });
    };
    //  get initial value
    $(document).ready(function () {
      const dbref = ref(db);
      get(child(dbref, 'counter')).then((snapshot) => {
        countVariable = Number(snapshot.val());
        // Display the total here
        span.innerHTML = countVariable;
      });
    });
  </script>
</html>
